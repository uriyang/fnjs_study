var e,h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;function k(){h.Symbol||(h.Symbol=l);k=function(){}}var m=0;function l(a){return"jscomp_symbol_"+a+m++}function n(){k();h.Symbol.iterator||(h.Symbol.iterator=h.Symbol("iterator"));n=function(){}}function p(a){n();if(a[h.Symbol.iterator])return a[h.Symbol.iterator]();var b=0;return{next:function(){return b==a.length?{done:!0}:{done:!1,value:a[b++]}}}}var r={};function t(a,b){var c=window.localStorage,d;this.a=function(){return d||JSON.parse(c.getItem(a)||"[]")};this.b=function(b){c.setItem(a,JSON.stringify(d=b))};b&&b()}t.prototype.find=function(a,b){var c=this.a(),d;b(c.filter(function(c){for(d in a)if(a[d]!==c[d])return!1;return!0}))};function u(a,b,c){for(var d=b.id,f=a.a(),g=f.length,q;g--;)if(f[g].id===d){for(q in b)f[g][q]=b[q];break}a.b(f);c&&c()}function v(a,b,c){var d=a.a();d.push(b);a.b(d);c&&c()}
t.prototype.remove=function(a,b){var c,d=this.a().filter(function(b){for(c in a)if(a[c]!==b[c])return!0;return!1});this.b(d);b&&b(d)};function y(a,b){a.find(r,function(a){for(var d=a.length,f=d,g=0;f--;)g+=a[f].c;b(d,d-g,g)})};function z(a,b){return(b||document).querySelector(a)}function A(a,b,c,d){a.addEventListener(b,c,!!d)}function B(a,b,c,d,f){A(a,c,function(c){for(var f=c.target,w=a.querySelectorAll(b),x=w.length;x--;)if(w[x]===f){d.call(f,c);break}},!!f)}function C(a){return a.replace(/[&<]/g,function(a){return"&"===a?"&amp;":"&lt;"})};function D(a){return a.reduce(function(a,c){return a+('\n<li data-id="'+c.id+'"'+(c.c?' class="completed"':"")+'>\n\t<input class="toggle" type="checkbox" '+(c.c?"checked":"")+">\n\t<label>"+C(c.title)+'</label>\n\t<button class="destroy"></button>\n</li>')},"")};function E(a){return parseInt(a.parentNode.dataset.id,10)}function F(){this.a=z(".todo-list");this.s=z(".todo-count");this.b=z(".clear-completed");this.o=z(".main");this.h=z(".toggle-all");this.g=z(".new-todo");B(this.a,"li label","dblclick",function(a){a=a.target;var b=a.parentElement;b.classList.add("editing");var c=document.createElement("input");c.className="edit";c.value=a.innerText;b.appendChild(c);c.focus()})}F.prototype.u=function(a){this.a.innerHTML=D(a)};
function G(a,b){var c=z('[data-id="'+a+'"]');c.removeChild(z("input.edit",c));c.classList.remove("editing");z("label",c).textContent=b}function H(a,b){A(a.g,"change",function(a){(a=a.target.value.trim())&&b(a)})}function I(a,b){A(a.h,"click",function(a){b(a.target.checked)})}function J(a,b){B(a.a,".destroy","click",function(a){b(E(a.target))})}function K(a,b){B(a.a,".toggle","click",function(a){a=a.target;b(E(a),a.checked)})}
function L(a,b){B(a.a,"li .edit","blur",function(a){a=a.target;a.dataset.v||b(E(a),a.value.trim())},!0);B(a.a,"li .edit","keypress",function(a){var b=a.target;13===a.keyCode&&b.blur()})}function M(a,b){B(a.a,"li .edit","keyup",function(a){var d=a.target;27===a.keyCode&&(d.dataset.v=!0,d.blur(),b(E(d)))})};function N(a,b){var c=this;this.a=a;this.b=b;H(b,this.j.bind(this));L(b,this.m.bind(this));M(b,this.l.bind(this));J(b,this.i.bind(this));K(b,function(a,b){O(c,a,b);c.f()});A(b.b,"click",this.w.bind(this));I(b,this.A.bind(this));this.h="";this.g=null}e=N.prototype;e.j=function(a){var b=this;v(this.a,{id:Date.now(),title:a,c:!1},function(){b.b.g.value="";b.f(!0)})};e.m=function(a,b){b.length?u(this.a,{id:a,title:b},function(){G(a,b)}):this.i(a)};e.l=function(a){this.a.find({id:a},function(b){G(a,b[0].title)})};
e.i=function(a){var b=this;this.a.remove({id:a},function(){b.f();var c=z('[data-id="'+a+'"]');c&&b.b.a.removeChild(c)})};e.w=function(){this.a.remove({c:!0},this.f.bind(this))};function O(a,b,c){u(a.a,{id:b,c:c},function(){var a=z('[data-id="'+b+'"]');a&&(a.className=c?"completed":"",z("input",a).checked=c)})}e.A=function(a){var b=this;this.a.find({c:!a},function(c){c=p(c);for(var d=c.next();!d.done;d=c.next())O(b,d.value.id,a)});this.f()};
e.f=function(a){var b=this,c=this.h;(a||""!==this.g||this.g!==c)&&this.a.find({"":r,active:{c:!1},completed:{c:!0}}[c],this.b.u.bind(this.b));y(this.a,function(a,c,g){b.b.s.innerHTML=c+" item"+(1!==c?"s":"")+" left";b.b.b.style.display=g?"block":"none";b.b.h.checked=g===a;b.b.o.style.display=a?"block":"none"});this.g=c};var P=new t("todos-vanilla-es6"),Q=new F,R=new N(P,Q);function S(){var a=document.location.hash.replace(/^#\//,"");R.h=a;R.f();z(".filters>.selected").className="";z('.filters>[href="#/'+a+'"]').className="selected"}A(window,"load",S);A(window,"hashchange",S);
